import{loadModule}from"/js/module/moduleLoader.js";export async function xf_init(){console.log("xf_init()"),await xf_loadTab1Content(),xf_addEventListeners(),xf_loadAnnouncement()}export function xf_addEventListeners(){document.getElementById("loadIntroFclBtn").addEventListener("click",xf_loadIntroFclBtn_Click)}export async function xf_loadIntroFclBtn_Click(){(await loadModule("/js/module/loadContent.js")).xf_loadHtmlContentFromUrl("/page/introFcl.html",document.getElementById("introFcl"))}export async function xf_loadTab1Content(){const n=await loadModule("/js/module/loadContent.js");await n.xf_loadHtmlContentFromUrl("/page/tab1.html",document.getElementById("tab1"))}export async function xf_loadAnnouncement(){const n=await loadModule("/js/module/loadContent.js"),t=await loadModule("/js/module/utils.js"),e="xf_announcement_checksum",o=t.xf_readLocalStorage(e);console.log("tab1：加载公告内容：已存校验值：",o);const a=await n.xf_getHtmlContent("/data/content/announcement.html");if(a instanceof HTMLSpanElement&&a.textContent.startsWith("获取 HTML 内容：出错："))return void console.error("tab1：加载公告内容：出错：",a.textContent);const l=a?.innerHTML||"",d=t.xf_calculateChecksum(l);console.log("tab1：加载公告内容：当前校验值：",d);const c=document.getElementById("xf_announcementContent"),r=document.getElementById("xf_announcementTitle");if(!c||!r)return void console.error("tab1：加载公告内容：出错：找不到容器");c.innerHTML="",a&&c.appendChild(a),null!==o&&parseInt(o,10)===d?(console.log("tab1：加载公告内容：公告为旧"),r.innerHTML="公告"):(console.log("tab1：加载公告内容：公告为新"),r.innerHTML='公告 <span style="color: #ff0;">●</span>');const s=document.getElementById("xf_announcement");s&&(s.dataset.xfAnnouncementListenerAdded||(s.addEventListener("click",(function(){r.innerHTML="公告",t.xf_writeLocalStorage(e,d.toString())})),s.dataset.xfAnnouncementListenerAdded="true"))}