import{loadModule}from"/js/module/moduleLoader.js";export function show(sysInfoEle){const result=(new UAParser).getResult();console.log("系统检测：",result);const osn=result.os.name,osv=result.os.version,cpuarch=result.cpu.architecture||navigator.platform,bn=result.browser.name;if(sysInfoEle.innerHTML="",addSysInfoItem(sysInfoEle,navigator.userAgent),"Android"!==osn)addSysErrItem(sysInfoEle,"当前系统不是安卓系统，无法运行。");else if(parseInt(osv)<9)addSysErrItem(sysInfoEle,"当前系统版本过低，无法运行。");else if(cpuarch){const matchItem=[{reg:/aarch64|arm64|armv8/i,msg:"请选择通用架构或“arm64-v8a”架构。"},{reg:/armeabi-v7a|(arm$)|armv7/i,msg:"请选择通用架构或“armeabi-v7a”架构。"},{reg:/x86_64|x64|amd64/i,msg:"请选择通用架构或“x86_64”架构。"},{reg:/x86|i[36]86/i,msg:"请选择通用架构或“x86”架构。"}].find((item=>item.reg.test(cpuarch)));matchItem?addSysGreenItem(sysInfoEle,matchItem.msg):addSysInfoItem(sysInfoEle,"请选择通用架构。")}["Chrome","Mobile Chrome","Firefox","Mobile Firefox","Edge","Opera"].includes(bn)||addSysWarnItem(sysInfoEle,"当前浏览器不是常用浏览器。部分浏览器会识别下载内容并引流至下载其它软件。"),"Vivo Browser"===bn&&addSysErrItem(sysInfoEle,"vivo品牌手机自带浏览器会识别下载内容并引流至下载其它软件。"),("WeChat"===bn||isAndroidQQInnerWebView(navigator.userAgent))&&addSysErrItem(sysInfoEle,"请复制网址到浏览器中打开！")}export function addSysInfoItem(sysInfoEle,content){const itemEle=document.createElement("div");itemEle.innerHTML=`\n  <div class="mdui-panel-item mdui-panel-item-open">\n    <div class="mdui-panel-item-body mdui-typo" style='padding: 12px; padding-bottom: 0px;'>\n      <p><i class="mdui-icon material-icons">info</i>${content}</p>\n    </div>\n  </div>\n  `,sysInfoEle.appendChild(itemEle)}export function addSysWarnItem(sysInfoEle,content){const itemEle=document.createElement("div");itemEle.innerHTML=`\n  <div class="mdui-panel-item mdui-panel-item-open" style="background-color: #ffff0040;">\n    <div class="mdui-panel-item-body mdui-typo" style='padding: 12px; padding-bottom: 0px;'>\n      <p><i class="mdui-icon material-icons">warning</i>${content}</p>\n    </div>\n  </div>\n  `,sysInfoEle.appendChild(itemEle)}export function addSysErrItem(sysInfoEle,content){const itemEle=document.createElement("div");itemEle.innerHTML=`\n  <div class="mdui-panel-item mdui-panel-item-open" style="background-color: #ff000040;">\n    <div class="mdui-panel-item-body mdui-typo" style='padding: 12px; padding-bottom: 0px;'>\n      <p><i class="mdui-icon material-icons">cancel</i>${content}</p>\n    </div>\n  </div>\n  `,sysInfoEle.appendChild(itemEle)}export function addSysGreenItem(sysInfoEle,content){const itemEle=document.createElement("div");itemEle.innerHTML=`\n  <div class="mdui-panel-item mdui-panel-item-open" style="background-color: #00ff0040;">\n    <div class="mdui-panel-item-body mdui-typo" style='padding: 12px; padding-bottom: 0px;'>\n      <p><i class="mdui-icon material-icons">check_circle</i>${content}</p>\n    </div>\n  </div>\n  `,sysInfoEle.appendChild(itemEle)}function isAndroidQQInnerWebView(userAgent){if("string"!=typeof userAgent)return!1;const ua=userAgent.toLowerCase(),hasAndroid=ua.includes("android"),hasVAS=ua.includes("v1_and_sq_"),hasQQTheme=ua.includes("qqtheme/"),hasQQVersion=ua.includes("qq/"),hasWebView=ua.includes("wv"),isQQInnerWebView=hasAndroid&&hasVAS&&hasQQTheme&&hasQQVersion&&hasWebView;return console.log("系统检测：是安卓版QQ内置WebView：",isQQInnerWebView),isQQInnerWebView}